pipeline {
	agent any
	stages {
		stage('Clean stage'){
			steps {
				sh 'mvn clean'
			}
		}

		stage('Compile stage'){
			steps {
				sh 'mvn compile'
			}
		}

		stage('Test Compile stage'){
			steps {
				sh 'mvn test-compile'
			}
		}

		stage('Test stage'){
			steps {
				sh 'mvn test'
			}
		}

		stage('Install stage'){
			steps {
				sh 'mvn install'
			}
		}

		stage('Run stage'){
			steps {
			sh 'chmod 777 target'
			sh 'ls target -l'
			sh 'chmod 777 target/project-1.0-SNAPSHOT.jar'
			sh 'chmod 777 install.sh'
			sh "jar -xf target/project-1.0-SNAPSHOT.jar"
		sh "echo 'Main-Class: App\n' >> target/META-INF/MANIFEST.MF"
		sh 'java -cfm erlyn.jar target/META-INF/MANIFEST.MF target/App.class'
		sh 'java -jar erlyn.jar'
			}
		}
	}
}
